---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "sakura_nosql Resource - sakura"
subcategory: "Database"
description: |-
  Manages a NoSQL appliance.
---

# sakura_nosql (Resource)

Manages a NoSQL appliance.

## Example Usage

```terraform
data "sakura_vswitch" "foobar" {
  name = "foobar"
}

resource "sakura_nosql" "foobar" {
  name        = "foobar"
  tags        = ["nosql"]
  zone        = "tk1b"
  plan        = "100GB" // or "250GB"
  description = "NoSQL database"
  password_wo = "password-123456789"
  password_wo_version = 1
  vswitch_id  = data.sakura_vswitch.foobar.id
  settings = {
    reserve_ip_address = "192.168.0.6"
    backup = {
      connect = "nfs://192.168.0.30/export"
      days_of_week = ["sun"]
      time = "00:00"
      rotate = 5
    }
    repair = {
      full = {
        interval = 14
        day_of_week = "wed"
        time = "00:30"
      }
      incremental = {
        days_of_week = ["mon"]
        time = "00:15"
      }
    }
  }
  remark = {
    nosql = {
      default_user = "testuser"
      port = 9042
    }
    servers = [
      "192.168.0.3",
      "192.168.0.4",
      "192.168.0.5",
    ]
    network = {
      gateway = "192.168.0.1"
      netmask = 24
    }
  }
  /* sakura_kms based disk encryption
  disk = {
    encryption_algorithm = "aes256_xts"
    kms_key_id           = data.sakura_kms.foobar.id
  }
   */
  parameters = {
    concurrent_writes = "16"
    cas_contention_timeout = "2000ms"
  }
}

resource "sakura_nosql" "foobar40GB" {
  name = "foobar-40GB"
  tags = ["nosql"]
  plan = "40GB"
  description = "Test database"
  password    = "sdktest-12345678"
  vswitch_id  = data.sakura_vswitch.foobar.id
  settings = {
    backup = {
      connect = "nfs://192.168.0.31/export"
      days_of_week = ["sun"]
      time = "00:30"
      rotate = 2
    }
  }
  remark = {
    nosql = {
      default_user = "testuser2"
      port = 9042
    }
    servers = [
      "192.168.0.7",
    ]
    network = {
      gateway = "192.168.0.1"
      netmask = 24
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `name` (String) The name of the NoSQL appliance.
- `password_wo` (String, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) Password for NoSQL appliance
- `remark` (Attributes) (see [below for nested schema](#nestedatt--remark))
- `settings` (Attributes) Settings of the NoSQL appliance (see [below for nested schema](#nestedatt--settings))
- `vswitch_id` (String) The ID of the vSwitch to connect to the NoSQL appliance.

### Optional

- `description` (String) The description of the NoSQL appliance. The length of this value must be in the range [`1`-`512`]
- `disk` (Attributes) (see [below for nested schema](#nestedatt--disk))
- `parameters` (Map of String) Parameters for the NoSQL appliance
- `password_wo_version` (Number) The version of the password_wo field. This value must be greater than 0 when set. Increment this when changing password.
- `plan` (String) The plan name of the NoSQL appliance. This must be one of [`40GB`/`100GB`/`250GB`]
- `tags` (Set of String) The tags of the NoSQL appliance.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))
- `zone` (String) Zone where NoSQL appliance is located.

### Read-Only

- `availability` (String) Availability state. state is one of migrating / available / failed
- `created_at` (String) Creation time
- `generation` (Number) Generation number
- `id` (String) The ID of the NoSQL appliance.
- `instance` (Attributes) Instance and host information (see [below for nested schema](#nestedatt--instance))
- `interfaces` (Attributes List) Network interfaces (see [below for nested schema](#nestedatt--interfaces))

<a id="nestedatt--remark"></a>
### Nested Schema for `remark`

Required:

- `network` (Attributes) Network information (see [below for nested schema](#nestedatt--remark--network))
- `nosql` (Attributes) NoSQL database information (see [below for nested schema](#nestedatt--remark--nosql))
- `servers` (List of String) IP addresses which connect to user's switch

Read-Only:

- `zone_id` (String) Zone ID where NoSQL appliance is located.

<a id="nestedatt--remark--network"></a>
### Nested Schema for `remark.network`

Required:

- `gateway` (String) The gateway address of the network
- `netmask` (Number) The netmask of the network


<a id="nestedatt--remark--nosql"></a>
### Nested Schema for `remark.nosql`

Required:

- `default_user` (String) Default user for NoSQL appliance.

Optional:

- `port` (Number) Port number used by NoSQL appliance.
- `version` (String) Version of database engine used by NoSQL appliance.

Read-Only:

- `disk_size` (Number) Disk size of NoSQL appliance.
- `engine` (String) Database engine used by NoSQL appliance.
- `memory` (Number) Memory size of NoSQL appliance.
- `nodes` (Number) Number of nodes. 3 for primary node, 2 for additional nodes
- `primary_nodes` (Attributes) This is for additional nodes resource. Always null in this resource (see [below for nested schema](#nestedatt--remark--nosql--primary_nodes))
- `virtualcore` (Number) Number of virtual cores used by NoSQL appliance.
- `zone` (String) Zone where NoSQL appliance is located.

<a id="nestedatt--remark--nosql--primary_nodes"></a>
### Nested Schema for `remark.nosql.primary_nodes`

Read-Only:

- `id` (String) The resource ID of the primary NoSQL appliance
- `zone` (String) Zone where the primary NoSQL appliance is located.




<a id="nestedatt--settings"></a>
### Nested Schema for `settings`

Optional:

- `backup` (Attributes) (see [below for nested schema](#nestedatt--settings--backup))
- `repair` (Attributes) Regular repair configuration (see [below for nested schema](#nestedatt--settings--repair))
- `reserve_ip_address` (String) Reserved IP address. This address is used for dead node replacement
- `source_network` (List of String) Source network address

<a id="nestedatt--settings--backup"></a>
### Nested Schema for `settings.backup`

Required:

- `connect` (String) Backup destination by NFS URL format
- `rotate` (Number) Number of backup rotations

Optional:

- `days_of_week` (Set of String) Backup schedule
- `time` (String) Time for backup execution


<a id="nestedatt--settings--repair"></a>
### Nested Schema for `settings.repair`

Optional:

- `full` (Attributes) Full repair configuration (see [below for nested schema](#nestedatt--settings--repair--full))
- `incremental` (Attributes) Incremental repair configuration (see [below for nested schema](#nestedatt--settings--repair--incremental))

<a id="nestedatt--settings--repair--full"></a>
### Nested Schema for `settings.repair.full`

Required:

- `day_of_week` (String) Repair schedule
- `interval` (Number) Execution interval of 7 days. Supported values are 7 / 14 / 21 / 28
- `time` (String) Time for full repair execution


<a id="nestedatt--settings--repair--incremental"></a>
### Nested Schema for `settings.repair.incremental`

Required:

- `days_of_week` (Set of String) Repair schedule
- `time` (String) Time for incremental repair execution




<a id="nestedatt--disk"></a>
### Nested Schema for `disk`

Optional:

- `encryption_algorithm` (String) The disk encryption algorithm. This must be one of [`none`/`aes256_xts`]
- `kms_key_id` (String) ID of the KMS key for encryption


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--instance"></a>
### Nested Schema for `instance`

Read-Only:

- `host` (Attributes) (see [below for nested schema](#nestedatt--instance--host))
- `hosts` (Attributes List) (see [below for nested schema](#nestedatt--instance--hosts))
- `status` (String) The NoSQL instance status. 'up' or 'down'
- `status_changed_at` (String) The time when the status was last changed

<a id="nestedatt--instance--host"></a>
### Nested Schema for `instance.host`

Read-Only:

- `info_url` (String) The information URL of the host where NoSQL appliance is running
- `name` (String) The host name where NoSQL appliance is running


<a id="nestedatt--instance--hosts"></a>
### Nested Schema for `instance.hosts`

Read-Only:

- `info_url` (String) The information URL of the host where NoSQL appliance is running
- `name` (String) The host name where NoSQL appliance is running



<a id="nestedatt--interfaces"></a>
### Nested Schema for `interfaces`

Read-Only:

- `hostname` (String) Hostname assigned to the interface
- `ip_address` (String) IP Address assigned to the interface
- `user_ip_address` (String) IP Address which connect to user's switch
- `vswitch` (Attributes) (see [below for nested schema](#nestedatt--interfaces--vswitch))

<a id="nestedatt--interfaces--vswitch"></a>
### Nested Schema for `interfaces.vswitch`

Read-Only:

- `id` (String) The ID of the vSwitch connected to the interface
- `name` (String) The name of the vSwitch connected to the interface
- `scope` (String) The scope of the vSwitch connected to the interface
- `subnet` (Attributes) (see [below for nested schema](#nestedatt--interfaces--vswitch--subnet))
- `user_subnet` (Attributes) (see [below for nested schema](#nestedatt--interfaces--vswitch--user_subnet))

<a id="nestedatt--interfaces--vswitch--subnet"></a>
### Nested Schema for `interfaces.vswitch.subnet`

Read-Only:

- `band_width_mbps` (Number) The bandwidth in Mbps of the subnet connected to the interface
- `gateway` (String) The gateway of the subnet connected to the interface
- `netmask` (Number) The netmask of the subnet connected to the interface
- `network_address` (String) The network address of the subnet connected to the interface


<a id="nestedatt--interfaces--vswitch--user_subnet"></a>
### Nested Schema for `interfaces.vswitch.user_subnet`

Read-Only:

- `gateway` (String) The gateway of the user subnet connected to the interface
- `netmask` (Number) The netmask of the user subnet connected to the interface
