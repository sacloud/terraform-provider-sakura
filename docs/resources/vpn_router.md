---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "sakura_vpn_router Resource - sakura"
subcategory: "Networking"
description: |-
  Manages a VPN Router.
---

# sakura_vpn_router (Resource)

Manages a VPN Router.

## Example Usage

```terraform
resource "sakura_vpn_router" "standard" {
  name                = "standard"
  description         = "description"
  tags                = ["tag1", "tag2"]
  internet_connection = true
}

resource "sakura_vpn_router" "premium" {
  name        = "premium"
  description = "description"
  tags        = ["tag1", "tag2"]
  plan        = "premium"

  internet_connection = true

  public_network_interface = {
    switch_id    = sakura_internet.foobar.switch_id
    vip          = sakura_internet.foobar.ip_addresses[0]
    ip_addresses = [sakura_internet.foobar.ip_addresses[1], sakura_internet.foobar.ip_addresses[2]]
    aliases      = [sakura_internet.foobar.ip_addresses[3]]
    vrid         = 1
  }

  private_network_interface = [{
    index        = 1
    switch_id    = sakura_cloud_switch.foobar.id
    vip          = "192.168.11.1"
    ip_addresses = ["192.168.11.2", "192.168.11.3"]
    netmask      = 24
  }]

  dhcp_server = [{
    interface_index = 1

    range_start = "192.168.11.11"
    range_stop  = "192.168.11.20"
    dns_servers = ["8.8.8.8", "8.8.4.4"]
  }]

  dhcp_static_mapping = [{
    ip_address  = "192.168.11.10"
    mac_address = "aa:bb:cc:aa:bb:cc"
  }]

  dns_forwarding = {
    interface_index = 1
    dns_servers = ["133.242.0.3", "133.242.0.4"]
  }

  firewall = [{
    interface_index = 1
    direction = "send"
    expression = [{
      protocol            = "tcp"
      source_network      = ""
      source_port         = "80"
      destination_network = ""
      destination_port    = ""
      allow               = true
      logging             = true
      description         = "desc"
    },
    {
      protocol            = "ip"
      source_network      = ""
      source_port         = ""
      destination_network = ""
      destination_port    = ""
      allow               = false
      logging             = true
      description         = "desc"
    }]
  }]

  l2tp = {
    pre_shared_secret = "example"
    range_start       = "192.168.11.21"
    range_stop        = "192.168.11.30"
  }

  port_forwarding = [{
    protocol     = "udp"
    public_port  = 10022
    private_ip   = "192.168.11.11"
    private_port = 22
    description  = "desc"
  }]

  pptp = {
    range_start = "192.168.11.31"
    range_stop  = "192.168.11.40"
  }

  wire_guard = {
    ip_address = "192.168.31.1/24"
    peer = [{
      name       = "example"
      ip_address = "192.168.31.11"
      public_key = "<your-public-key>"
    }]
  }

  site_to_site_vpn = [{
    peer              = "10.0.0.1"
    remote_id         = "10.0.0.1"
    pre_shared_secret = "example"
    routes            = ["10.0.0.0/8"]
    local_prefix      = ["192.168.21.0/24"]
  }]

  site_to_site_vpn_parameter = {
    ike = {
      lifetime = 28800
      dpd = {
        interval = 15
        timeout  = 30
      }
    }
    esp = {
      lifetime = 1800
    }
    encryption_algo = "aes256"
    hash_algo       = "sha256"
  }

  static_nat = [{
    public_ip   = sakura_internet.foobar.ip_addresses[3]
    private_ip  = "192.168.11.12"
    description = "desc"
  }]

  static_route = [{
    prefix   = "172.16.0.0/16"
    next_hop = "192.168.11.99"
  }]

  user = [{
    name     = "username"
    password = "password"
  }]

  scheduled_maintenance = {
    day_of_week = "tue"
    hour        = 1
  }
}

resource "sakura_internet" "foobar" {
  name = "foobar"
}

resource "sakura_switch" "foobar" {
  name = "foobar"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the VPNRouter.

### Optional

- `description` (String) The description of the VPNRouter. The length of this value must be in the range [`1`-`512`]
- `dhcp_server` (Attributes List) (see [below for nested schema](#nestedatt--dhcp_server))
- `dhcp_static_mapping` (Attributes List) (see [below for nested schema](#nestedatt--dhcp_static_mapping))
- `dns_forwarding` (Attributes) (see [below for nested schema](#nestedatt--dns_forwarding))
- `firewall` (Attributes List) (see [below for nested schema](#nestedatt--firewall))
- `icon_id` (String) The icon id to attach to the VPNRouter
- `internet_connection` (Boolean) The flag to enable connecting to the Internet from the VPN Router
- `l2tp` (Attributes) (see [below for nested schema](#nestedatt--l2tp))
- `plan` (String) The plan name of the VPNRouter. This must be one of [`standard`/`premium`/`highspec`/`highspec4000`]
- `port_forwarding` (Attributes List) (see [below for nested schema](#nestedatt--port_forwarding))
- `pptp` (Attributes) (see [below for nested schema](#nestedatt--pptp))
- `private_network_interface` (Attributes List) A list of additional network interface setting. This doesn't include primary network interface setting (see [below for nested schema](#nestedatt--private_network_interface))
- `public_network_interface` (Attributes) (see [below for nested schema](#nestedatt--public_network_interface))
- `scheduled_maintenance` (Attributes) (see [below for nested schema](#nestedatt--scheduled_maintenance))
- `site_to_site_vpn` (Attributes List) (see [below for nested schema](#nestedatt--site_to_site_vpn))
- `site_to_site_vpn_parameter` (Attributes) (see [below for nested schema](#nestedatt--site_to_site_vpn_parameter))
- `static_nat` (Attributes List) (see [below for nested schema](#nestedatt--static_nat))
- `static_route` (Attributes List) (see [below for nested schema](#nestedatt--static_route))
- `syslog_host` (String) The ip address of the syslog host to which the VPC Router sends logs
- `tags` (Set of String) The tags of the VPNRouter.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))
- `user` (Attributes List) (see [below for nested schema](#nestedatt--user))
- `version` (Number) The version of the VPN Router.
- `wire_guard` (Attributes) (see [below for nested schema](#nestedatt--wire_guard))
- `zone` (String) The name of zone that the VPNRouter will be created (e.g. `is1a`, `tk1a`)

### Read-Only

- `id` (String) The ID of the VPNRouter.
- `public_ip` (String) The public ip address of the VPN Router
- `public_netmask` (Number) The bit length of the subnet to assign to the public network interface

<a id="nestedatt--dhcp_server"></a>
### Nested Schema for `dhcp_server`

Required:

- `interface_index` (Number) The index of the network interface on which to enable the DHCP service. This must be in the range [`1`-`7`]
- `range_start` (String) The start value of IP address range to assign to DHCP client
- `range_stop` (String) The end value of IP address range to assign to DHCP client

Optional:

- `dns_servers` (List of String) A list of IP address of DNS server to assign to DHCP client


<a id="nestedatt--dhcp_static_mapping"></a>
### Nested Schema for `dhcp_static_mapping`

Required:

- `ip_address` (String) The static IP address to assign to DHCP client
- `mac_address` (String) The source MAC address of static mapping


<a id="nestedatt--dns_forwarding"></a>
### Nested Schema for `dns_forwarding`

Required:

- `interface_index` (Number) The index of the network interface on which to enable the DNS forwarding service. This must be in the range [`1`-`7`]

Optional:

- `dns_servers` (List of String) A list of IP address of DNS server to forward to


<a id="nestedatt--firewall"></a>
### Nested Schema for `firewall`

Required:

- `direction` (String) The direction to apply the firewall. This must be one of [`send`/`receive`]
- `expression` (Attributes List) (see [below for nested schema](#nestedatt--firewall--expression))

Optional:

- `interface_index` (Number) The index of the network interface on which to enable filtering. This must be in the range [`0`-`7`]

<a id="nestedatt--firewall--expression"></a>
### Nested Schema for `firewall.expression`

Required:

- `allow` (Boolean) The flag to allow the packet through the filter
- `protocol` (String) The protocol used for filtering. This must be one of [`tcp`/`udp`/`icmp`/`ip`]

Optional:

- `description` (String) The description of the firewall expression. The length of this value must be in the range [`1`-`512`]
- `destination_network` (String) A destination IP address or CIDR block used for filtering (e.g. `192.0.2.1`, `192.0.2.0/24`)
- `destination_port` (String) A destination port number or port range used for filtering (e.g. `1024`, `1024-2048`). This is only used when `protocol` is `tcp` or `udp`
- `logging` (Boolean) The flag to enable packet logging when matching the expression
- `source_network` (String) A source IP address or CIDR block used for filtering (e.g. `192.0.2.1`, `192.0.2.0/24`)
- `source_port` (String) A source port number or port range used for filtering (e.g. `1024`, `1024-2048`). This is only used when `protocol` is `tcp` or `udp`



<a id="nestedatt--l2tp"></a>
### Nested Schema for `l2tp`

Required:

- `pre_shared_secret` (String, Sensitive) The pre shared secret for L2TP/IPsec
- `range_start` (String) The start value of IP address range to assign to L2TP/IPsec client
- `range_stop` (String) The end value of IP address range to assign to L2TP/IPsec client


<a id="nestedatt--port_forwarding"></a>
### Nested Schema for `port_forwarding`

Required:

- `private_ip` (String) The destination ip address of the port forwarding
- `private_port` (Number) The destination port number of the port forwarding. This will be a port number on a private network
- `protocol` (String) The protocol used for port forwarding. This must be one of [`tcp`/`udp`]
- `public_port` (Number) The source port number of the port forwarding. This must be a port number on a public network

Optional:

- `description` (String) The description of the port forwarding. The length of this value must be in the range [`1`-`512`]


<a id="nestedatt--pptp"></a>
### Nested Schema for `pptp`

Required:

- `range_start` (String) The start value of IP address range to assign to PPTP client
- `range_stop` (String) The end value of IP address range to assign to PPTP client


<a id="nestedatt--private_network_interface"></a>
### Nested Schema for `private_network_interface`

Required:

- `index` (Number) The index of the network interface. This must be in the range [`1`-`7`]
- `ip_addresses` (List of String) A set of ip address to assign to the network interface. This is required only one value when `plan` is `standard`, two values otherwise
- `netmask` (Number) The bit length of the subnet assigned to the network interface
- `switch_id` (String) The id of the connected switch

Optional:

- `vip` (String) The virtual IP address to assign to the network interface. This is only required when `plan` is not `standard`


<a id="nestedatt--public_network_interface"></a>
### Nested Schema for `public_network_interface`

Optional:

- `aliases` (List of String) A list of ip alias to assign to the VPC Router. This can only be specified if `plan` is not `standard`
- `ip_addresses` (List of String) The list of the IP address to assign to the VPC Router. This is required only one value when `plan` is `standard`, two values otherwise
- `switch_id` (String) The id of the switch to connect. This is only required when when `plan` is not `standard`
- `vip` (String) The virtual IP address of the VPC Router. This is only required when `plan` is not `standard`
- `vrid` (Number) The Virtual Router Identifier. This is only required when `plan` is not `standard`


<a id="nestedatt--scheduled_maintenance"></a>
### Nested Schema for `scheduled_maintenance`

Optional:

- `day_of_week` (String) The value must be in [`sun`/`mon`/`tue`/`wed`/`thu`/`fri`/`sat`]
- `hour` (Number) The time to start maintenance


<a id="nestedatt--site_to_site_vpn"></a>
### Nested Schema for `site_to_site_vpn`

Required:

- `local_prefix` (List of String) A list of CIDR block of the network under the VPN Router
- `peer` (String) The IP address of the opposing appliance connected to the VPN Router
- `pre_shared_secret` (String, Sensitive) The pre shared secret for the VPN. The length of this value must be in the range [`0`-`40`]
- `remote_id` (String) The id of the opposing appliance connected to the VPN Router. This is typically set same as value of `peer`
- `routes` (List of String) A list of CIDR block of VPN connected networks


<a id="nestedatt--site_to_site_vpn_parameter"></a>
### Nested Schema for `site_to_site_vpn_parameter`

Optional:

- `dh_group` (String) This must be one of [`modp1024`/`modp2048`/`modp3072`/`modp4096`]
- `encryption_algo` (String) This must be one of [`aes128`/`aes256`]
- `esp` (Attributes) (see [below for nested schema](#nestedatt--site_to_site_vpn_parameter--esp))
- `hash_algo` (String) This must be one of [`sha1`/`sha256`]
- `ike` (Attributes) (see [below for nested schema](#nestedatt--site_to_site_vpn_parameter--ike))

<a id="nestedatt--site_to_site_vpn_parameter--esp"></a>
### Nested Schema for `site_to_site_vpn_parameter.esp`

Optional:

- `lifetime` (Number) Default: 1800


<a id="nestedatt--site_to_site_vpn_parameter--ike"></a>
### Nested Schema for `site_to_site_vpn_parameter.ike`

Optional:

- `dpd` (Attributes) (see [below for nested schema](#nestedatt--site_to_site_vpn_parameter--ike--dpd))
- `lifetime` (Number) Lifetime of IKE SA. Default: 28800

<a id="nestedatt--site_to_site_vpn_parameter--ike--dpd"></a>
### Nested Schema for `site_to_site_vpn_parameter.ike.dpd`

Optional:

- `interval` (Number) Default: 15
- `timeout` (Number) Default: 30




<a id="nestedatt--static_nat"></a>
### Nested Schema for `static_nat`

Required:

- `private_ip` (String) The private IP address used for the static NAT
- `public_ip` (String) The public IP address used for the static NAT

Optional:

- `description` (String) The description of the static NAT. The length of this value must be in the range [`1`-`512`]


<a id="nestedatt--static_route"></a>
### Nested Schema for `static_route`

Required:

- `next_hop` (String) The IP address of the next hop
- `prefix` (String) The CIDR block of destination


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--user"></a>
### Nested Schema for `user`

Required:

- `name` (String) The user name used to authenticate remote access
- `password` (String, Sensitive) The password used to authenticate remote access


<a id="nestedatt--wire_guard"></a>
### Nested Schema for `wire_guard`

Required:

- `ip_address` (String) The IP address for WireGuard server. This must be formatted with xxx.xxx.xxx.xxx/nn

Optional:

- `peer` (Attributes List) (see [below for nested schema](#nestedatt--wire_guard--peer))

Read-Only:

- `public_key` (String) the public key of the WireGuard server

<a id="nestedatt--wire_guard--peer"></a>
### Nested Schema for `wire_guard.peer`

Required:

- `ip_address` (String) the IP address of the peer
- `name` (String) the name of the peer
- `public_key` (String) the public key of the WireGuard client
