---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "sakura_auto_scale Resource - sakura"
subcategory: "Misc"
description: |-
  Manages a AutoScale.
---

# sakura_auto_scale (Resource)

Manages a AutoScale.

## Example Usage

```terraform
locals {
  zone               = "is1a"
  server_name_prefix = "target-server-"
  api_key_id         = "<your-api-key>"
}

resource "sakura_server" "foobar" {
  name = local.server_name_prefix
  force_shutdown = true
  zone = local.zone
}

resource "sakura_auto_scale" "foobar" {
  name = "example"

  # 監視対象が存在するゾーン
  zones = [local.zone]

  # 設定ファイル
  config = yamlencode({
    resources : [{
      type : "Server",
      selector : {
        names : [sakura_server.foobar.name],
        zones : [local.zone],
      },
    }],
  })

  # APIキーのID
  api_key_id = local.api_key_id

  # しきい値
  cpu_threshold_scaling = {
    # 監視対象のサーバ名のプリフィックス
    server_prefix = local.server_name_prefix

    # 性能アップするCPU使用率
    up = 80

    # 性能ダウンするCPU使用率
    down = 20
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `api_key_id` (String) The ID of the API key
- `config` (String) The configuration file for sacloud/autoscaler
- `name` (String) The name of the AutoScale.
- `trigger_type` (String) Trigger type of schedule. This must be one of [`cpu`/`router`/`schedule`/`none`]
- `zones` (Set of String) Set of zone names where monitored resources are located

### Optional

- `cpu_threshold_scaling` (Attributes) (see [below for nested schema](#nestedatt--cpu_threshold_scaling))
- `description` (String) The description of the AutoScale. The length of this value must be in the range [`1`-`512`]
- `enabled` (Boolean) Whether to enable AutoScale
- `icon_id` (String) The icon id to attach to the AutoScale
- `router_threshold_scaling` (Attributes) (see [below for nested schema](#nestedatt--router_threshold_scaling))
- `schedule_scaling` (Attributes List) (see [below for nested schema](#nestedatt--schedule_scaling))
- `tags` (Set of String) The tags of the AutoScale.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `id` (String) The ID of the AutoScale.

<a id="nestedatt--cpu_threshold_scaling"></a>
### Nested Schema for `cpu_threshold_scaling`

Required:

- `down` (Number) Threshold for average CPU utilization to scale down/in
- `server_prefix` (String) Server name prefix to be monitored
- `up` (Number) Threshold for average CPU utilization to scale up/out


<a id="nestedatt--router_threshold_scaling"></a>
### Nested Schema for `router_threshold_scaling`

Required:

- `direction` (String) This must be one of [`in`/`out`]
- `mbps` (Number) Mbps
- `router_prefix` (String) Router name prefix to be monitored


<a id="nestedatt--schedule_scaling"></a>
### Nested Schema for `schedule_scaling`

Required:

- `action` (String) This must be one of [`up`/`down`]
- `days_of_week` (Set of String) A set of days of week to backed up. The values in the list must be in [`sun`/`mon`/`tue`/`wed`/`thu`/`fri`/`sat`]
- `hour` (Number) Hour to be triggered
- `minute` (Number) Minute to be triggered. This must be one of [`0`/`15`/`30`/`45`]


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
